{% extends "coplate_base/base_with_navbar.html" %}

{% load widget_tweaks %}

{% block title %}
    {% if review %}
        {{ review.title }}
    {% else %}
        새 포스트 작성
    {% endif %} | Coplate
{% endblock title %}

{% block content %}
<main class="site-body">
  <form class="review-form max-content-width" method="post" autocomplete="off" enctype="multipart/form-data">
      {# autocomplete : 폼을 작성할 때 과거의 사용자가 입력했던 값을 제안해주는 기능 #}
      {# enctype : 폼데이터를 어떻게 인코딩 할 것인지 정하는 속성. 폼에 파일 업로드 기능이 있으면 반드시 설정해야 한다. 그렇지 않으면 파일이 서버에 제대로 전송되지 않는다. #}
    {% csrf_token %}
    <div class="title">
{#      <input type="text" name="title" maxlength="30" placeholder="제목" class="cp-input" required id="id_title">#}
        {{ form.title|add_class:"cp-input"|attr:"placeholder:제목" }}
        {% for error in form.tltle.errors %}
            <div class="error-message">{{ error }}</div>
        {% endfor %}
    </div>
    <div class="restaurant-name">
{#      <input type="text" name="restaurant_name" maxlength="20" placeholder="음식점 이름" class="cp-input" required id="id_restaurant_name">#}
        {{ form.restaurant_name|add_class:"cp-input"|add_error_class:"error"|attr:"placeholder:음식점 이름" }}
        {% for error in form.restaurant_name.errors %}
            <div class="error-message">{{ error }}</div>
        {% endfor %}
    </div>
    <div class="restaurant-link">
{#      <input type="url" name="restaurant_link" maxlength="200" placeholder="네이버 또는 카카오 플레이스 주소" class="cp-input" required id="id_restaurant_link">#}
        {{ form.restaurant_link|add_class:"cp-input"|add_error_class:"error"|attr:"placeholder:네이버 또는 카카오플레이스 주소" }}
        {% for error in form.restaurant_link.errors %}
            <div class="error-message">{{ error }}</div>
        {% endfor %}
    </div>
    <div class="rating">
      <div class="cp-stars">
          {% for radio in form.rating %}
              {{ radio }}
          {% endfor %}
      </div>
        {% for error in form.rating.errors %}
            <div class="error-message">{{ error }}</div>
        {% endfor %}
    </div>
    <div class="content">
{#      <textarea name="review" cols="40" rows="10" placeholder="리뷰를 작성해 주세요." class="cp-input" id="id_review"></textarea>#}
        {{ form.content|add_class:"cp-input"|add_error_class:"error"|attr:"placeholder:리뷰를 작성해 주세요." }}
        {% for error in form.title.errors %}
            <div class="error-message">{{ error }}</div>
        {% endfor %}
    </div>
    <div class="file">
      <div class="file-content">
        {% if review.image1 %}
            <img src="{{ review.image1.url }}">
        {% endif %}
        <div>
{#          <input type="file" name="image1" accept="image/*" id="id_image1">#}
            {{ form.image1 }}
            {% for error in form.image1.errors %}
                <div class="error-message">{{ error }}</div>
            {% endfor %}
        </div>
      </div>
    </div>
    <div class="file">
      <div class="file-content">
        {% if review.image2 %}
            <img src="{{ review.image2.url }}">
        {% endif %}
        <div>
{#          <input type="file" name="image2" accept="image/*" id="id_image2">#}
            {{ form.image2 }}
            {% for error in form.image2.errors %}
                <div class="error-message">{{ error }}</div>
            {% endfor %}
        </div>
      </div>
    </div>
    <div class="file">
      <div class="file-content">
        {% if review.image3 %}
            <img src="{{ review.image3.url }}">
        {% endif %}
        <div>
{#          <input type="file" name="image3" accept="image/*" id="id_image3">#}
            {{ form.image3 }}
            {% for error in form.image3.errors %}
                <div class="error-message">{{ error }}</div>
            {% endfor %}
        </div>
      </div>
    </div>

    <div class="buttons">
      <a
        class="cp-button secondary cancel"
        href="{% if review %}{% url 'review-detail' review.id %}{% else %}{% url 'index' %}{% endif %}"
      >
        취소
      </a>
      <button class="cp-button submit" type="submit">완료</button>
    </div>
  </form>
</main>
{% endblock content %}
